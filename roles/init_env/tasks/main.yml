---
# tasks file for roles/init_env
          - name: Configure /etc/hosts for local node hostname resolv
            ansible.builtin.lineinfile:
                    path: /etc/hosts
                    line: "{{ ansible_host }}   {{ node_hostname }}"

          - name: Set hostname
            ansible.builtin.hostname:
                    name: "{{ node_hostname }}"

          - name: Enable mDNS in resolved.conf
            ansible.builtin.lineinfile:
                    path: /etc/systemd/resolved.conf
                    regexp: #MulticastDNS=no
                    line: MulticastDNS=yes

          - name: Enable mDNS on the interface
            shell: systemd-resolve --set-mdns=yes --interface={{ mdns_if }}
            notify: 
             - Reload systemd

          - name: Turn swap off
            command: swapoff -a

          - name: Disable swap at boot
            replace:
              path: /etc/fstab
              regexp: '^(\s*)([^#\n]+\s+)(\w+\s+)swap(\s+.*)$'
              replace: '#\1\2\3swap\4'
              backup: yes




